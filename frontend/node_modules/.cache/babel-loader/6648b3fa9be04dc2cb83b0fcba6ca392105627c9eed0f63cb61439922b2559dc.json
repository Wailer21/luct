{"ast":null,"code":"import React,{useState}from'react';import{useAuth}from'../utils/auth';import{useNavigate,useLocation,Link}from'react-router-dom';import{api,API_ENDPOINTS}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var _location$state,_location$state$from;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const auth=useAuth();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';async function submit(e){e.preventDefault();setLoading(true);setError('');// Basic validation\nif(!email||!password){setError('Please fill in all fields');setLoading(false);return;}try{const response=await api.post(API_ENDPOINTS.LOGIN,{email,password});if(response.success){auth.saveLogin(response.data.token,response.data.user);navigate(from,{replace:true});}else{setError(response.message||'Login failed. Please try again.');}}catch(err){setError(err.message||'Login failed. Please check your credentials and try again.');}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid py-5 bg-light min-vh-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center align-items-center min-vh-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 col-lg-5 col-xl-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow border-0 rounded-4 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header bg-gradient-primary text-white text-center py-4 border-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock fa-3x mb-3\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-2 fw-bold\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"small\",{className:\"opacity-75\",children:\"Sign in to your LUCT account\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body p-4 p-md-5\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger d-flex align-items-center rounded-3\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-2\"}),/*#__PURE__*/_jsx(\"div\",{children:error})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"needs-validation\",noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold text-dark\",children:\"Email Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text bg-light border-end-0\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope text-muted\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control border-start-0\",value:email,onChange:e=>setEmail(e.target.value),required:true,placeholder:\"Enter your email\",disabled:loading})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold text-dark\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text bg-light border-end-0\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock text-muted\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control border-start-0\",value:password,onChange:e=>setPassword(e.target.value),required:true,placeholder:\"Enter your password\",disabled:loading})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-lg w-100 py-3 fw-semibold rounded-pill shadow-sm\",type:\"submit\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\"}),\"Signing in...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sign-in-alt me-2\"}),\"Sign In\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4 pt-3 border-top\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-2\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary text-decoration-none fw-semibold\",children:\"Create one here\"})]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-decoration-none\",children:\"Forgot your password?\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card mt-4 border-0 rounded-4 bg-info bg-opacity-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-3\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-1\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Demo Access:\"}),\" Use lecturer credentials from the database\"]})})})]})})});}","map":{"version":3,"names":["React","useState","useAuth","useNavigate","useLocation","Link","api","API_ENDPOINTS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_location$state","_location$state$from","email","setEmail","password","setPassword","loading","setLoading","error","setError","auth","navigate","location","from","state","pathname","submit","e","preventDefault","response","post","LOGIN","success","saveLogin","data","token","user","replace","message","err","className","children","role","onSubmit","noValidate","type","value","onChange","target","required","placeholder","disabled","to"],"sources":["C:/Users/Wailer/Downloads/luct_reporting_app_/luct_reporting_app/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useAuth } from '../utils/auth';\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\nimport { api, API_ENDPOINTS } from '../utils/api';\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  \n  const auth = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const from = location.state?.from?.pathname || '/';\n\n  async function submit(e) {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    // Basic validation\n    if (!email || !password) {\n      setError('Please fill in all fields');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const response = await api.post(API_ENDPOINTS.LOGIN, { email, password });\n\n      if (response.success) {\n        auth.saveLogin(response.data.token, response.data.user);\n        navigate(from, { replace: true });\n      } else {\n        setError(response.message || 'Login failed. Please try again.');\n      }\n    } catch (err) {\n      setError(err.message || 'Login failed. Please check your credentials and try again.');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"container-fluid py-5 bg-light min-vh-100\">\n      <div className=\"row justify-content-center align-items-center min-vh-100\">\n        <div className=\"col-md-6 col-lg-5 col-xl-4\">\n          <div className=\"card shadow border-0 rounded-4 overflow-hidden\">\n            <div className=\"card-header bg-gradient-primary text-white text-center py-4 border-0\">\n              <div className=\"mb-3\">\n                <i className=\"fas fa-lock fa-3x mb-3\"></i>\n                <h4 className=\"mb-2 fw-bold\">Welcome Back</h4>\n                <small className=\"opacity-75\">Sign in to your LUCT account</small>\n              </div>\n            </div>\n            \n            <div className=\"card-body p-4 p-md-5\">\n              {error && (\n                <div className=\"alert alert-danger d-flex align-items-center rounded-3\" role=\"alert\">\n                  <i className=\"fas fa-exclamation-triangle me-2\"></i>\n                  <div>{error}</div>\n                </div>\n              )}\n\n              <form onSubmit={submit} className=\"needs-validation\" noValidate>\n                <div className=\"mb-4\">\n                  <label className=\"form-label fw-semibold text-dark\">Email Address</label>\n                  <div className=\"input-group input-group-lg\">\n                    <span className=\"input-group-text bg-light border-end-0\">\n                      <i className=\"fas fa-envelope text-muted\"></i>\n                    </span>\n                    <input \n                      type=\"email\" \n                      className=\"form-control border-start-0\" \n                      value={email} \n                      onChange={e => setEmail(e.target.value)} \n                      required \n                      placeholder=\"Enter your email\"\n                      disabled={loading}\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"mb-4\">\n                  <label className=\"form-label fw-semibold text-dark\">Password</label>\n                  <div className=\"input-group input-group-lg\">\n                    <span className=\"input-group-text bg-light border-end-0\">\n                      <i className=\"fas fa-lock text-muted\"></i>\n                    </span>\n                    <input \n                      type=\"password\" \n                      className=\"form-control border-start-0\" \n                      value={password} \n                      onChange={e => setPassword(e.target.value)} \n                      required \n                      placeholder=\"Enter your password\"\n                      disabled={loading}\n                    />\n                  </div>\n                </div>\n\n                <button \n                  className=\"btn btn-primary btn-lg w-100 py-3 fw-semibold rounded-pill shadow-sm\" \n                  type=\"submit\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\n                      Signing in...\n                    </>\n                  ) : (\n                    <>\n                      <i className=\"fas fa-sign-in-alt me-2\"></i>\n                      Sign In\n                    </>\n                  )}\n                </button>\n              </form>\n\n              <div className=\"text-center mt-4 pt-3 border-top\">\n                <p className=\"text-muted mb-2\">\n                  Don't have an account?{' '}\n                  <Link to=\"/register\" className=\"text-primary text-decoration-none fw-semibold\">\n                    Create one here\n                  </Link>\n                </p>\n                <small className=\"text-muted\">\n                  <Link to=\"/forgot-password\" className=\"text-decoration-none\">\n                    Forgot your password?\n                  </Link>\n                </small>\n              </div>\n            </div>\n          </div>\n\n          {/* Demo Credentials Card */}\n          <div className=\"card mt-4 border-0 rounded-4 bg-info bg-opacity-10\">\n            <div className=\"card-body p-3\">\n              <small className=\"text-info\">\n                <i className=\"fas fa-info-circle me-1\"></i>\n                <strong>Demo Access:</strong> Use lecturer credentials from the database\n              </small>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}