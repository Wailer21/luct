{"ast":null,"code":"import axios from \"axios\";\n\n// Base API URL (from frontend .env)\nconst API_BASE_URL = process.env.REACT_APP_API_URL ? `${process.env.REACT_APP_API_URL}/api` : \"http://localhost:5000/api\";\nexport const API_ENDPOINTS = {\n  // Auth\n  REGISTER: `${API_BASE_URL}/auth/register`,\n  LOGIN: `${API_BASE_URL}/auth/login`,\n  ME: `${API_BASE_URL}/auth/me`,\n  // Data\n  FACULTIES: `${API_BASE_URL}/faculties`,\n  COURSES: `${API_BASE_URL}/courses`,\n  CLASSES: `${API_BASE_URL}/classes`,\n  MY_CLASSES: `${API_BASE_URL}/my-classes`,\n  // Reports\n  REPORTS: `${API_BASE_URL}/reports`,\n  REPORTS_STATS: `${API_BASE_URL}/reports/stats`,\n  // Health\n  HEALTH: `${API_BASE_URL}/health`\n};\n\n// Create auth headers\nexport const createAuthHeaders = token => ({\n  headers: {\n    Authorization: `Bearer ${token}`,\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Get token from localStorage (common pattern)\nexport const getAuthToken = () => {\n  return localStorage.getItem(\"token\");\n};\n\n// Enhanced API call wrapper with error handling and automatic auth\nexport const apiCall = async (endpoint, options = {}, requireAuth = false) => {\n  try {\n    const config = {\n      url: endpoint,\n      ...options\n    };\n\n    // Add auth headers if required\n    if (requireAuth) {\n      const token = getAuthToken();\n      if (!token) {\n        throw new Error(\"Authentication required: No token found\");\n      }\n      config.headers = {\n        ...config.headers,\n        ...createAuthHeaders(token).headers\n      };\n    }\n    const response = await axios(config);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response3;\n    console.error(\"API Call failed:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n\n    // Handle specific error cases\n    if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n      // Clear invalid token\n      localStorage.removeItem(\"token\");\n      // You might want to redirect to login here\n      window.location.href = \"/login\";\n    }\n    throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error;\n  }\n};\n\n// Convenience methods for common HTTP operations\nexport const api = {\n  get: (endpoint, requireAuth = false) => apiCall(endpoint, {\n    method: \"GET\"\n  }, requireAuth),\n  post: (endpoint, data, requireAuth = false) => apiCall(endpoint, {\n    method: \"POST\",\n    data\n  }, requireAuth),\n  put: (endpoint, data, requireAuth = false) => apiCall(endpoint, {\n    method: \"PUT\",\n    data\n  }, requireAuth),\n  delete: (endpoint, requireAuth = false) => apiCall(endpoint, {\n    method: \"DELETE\"\n  }, requireAuth)\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","API_ENDPOINTS","REGISTER","LOGIN","ME","FACULTIES","COURSES","CLASSES","MY_CLASSES","REPORTS","REPORTS_STATS","HEALTH","createAuthHeaders","token","headers","Authorization","getAuthToken","localStorage","getItem","apiCall","endpoint","options","requireAuth","config","url","Error","response","data","error","_error$response","_error$response2","_error$response3","console","message","status","removeItem","window","location","href","api","get","method","post","put","delete"],"sources":["C:/Users/Wailer/Downloads/luct_reporting_app_/luct_reporting_app/frontend/src/utils/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// Base API URL (from frontend .env)\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL\r\n  ? `${process.env.REACT_APP_API_URL}/api`\r\n  : \"http://localhost:5000/api\";\r\n\r\nexport const API_ENDPOINTS = {\r\n  // Auth\r\n  REGISTER: `${API_BASE_URL}/auth/register`,\r\n  LOGIN: `${API_BASE_URL}/auth/login`,\r\n  ME: `${API_BASE_URL}/auth/me`,\r\n\r\n  // Data\r\n  FACULTIES: `${API_BASE_URL}/faculties`,\r\n  COURSES: `${API_BASE_URL}/courses`,\r\n  CLASSES: `${API_BASE_URL}/classes`,\r\n  MY_CLASSES: `${API_BASE_URL}/my-classes`,\r\n\r\n  // Reports\r\n  REPORTS: `${API_BASE_URL}/reports`,\r\n  REPORTS_STATS: `${API_BASE_URL}/reports/stats`,\r\n\r\n  // Health\r\n  HEALTH: `${API_BASE_URL}/health`,\r\n};\r\n\r\n// Create auth headers\r\nexport const createAuthHeaders = (token) => ({\r\n  headers: {\r\n    Authorization: `Bearer ${token}`,\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Get token from localStorage (common pattern)\r\nexport const getAuthToken = () => {\r\n  return localStorage.getItem(\"token\");\r\n};\r\n\r\n// Enhanced API call wrapper with error handling and automatic auth\r\nexport const apiCall = async (endpoint, options = {}, requireAuth = false) => {\r\n  try {\r\n    const config = {\r\n      url: endpoint,\r\n      ...options,\r\n    };\r\n\r\n    // Add auth headers if required\r\n    if (requireAuth) {\r\n      const token = getAuthToken();\r\n      if (!token) {\r\n        throw new Error(\"Authentication required: No token found\");\r\n      }\r\n      config.headers = {\r\n        ...config.headers,\r\n        ...createAuthHeaders(token).headers,\r\n      };\r\n    }\r\n\r\n    const response = await axios(config);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"API Call failed:\", error.response?.data || error.message);\r\n    \r\n    // Handle specific error cases\r\n    if (error.response?.status === 401) {\r\n      // Clear invalid token\r\n      localStorage.removeItem(\"token\");\r\n      // You might want to redirect to login here\r\n      window.location.href = \"/login\";\r\n    }\r\n    \r\n    throw error.response?.data || error;\r\n  }\r\n};\r\n\r\n// Convenience methods for common HTTP operations\r\nexport const api = {\r\n  get: (endpoint, requireAuth = false) => \r\n    apiCall(endpoint, { method: \"GET\" }, requireAuth),\r\n  \r\n  post: (endpoint, data, requireAuth = false) => \r\n    apiCall(endpoint, { method: \"POST\", data }, requireAuth),\r\n  \r\n  put: (endpoint, data, requireAuth = false) => \r\n    apiCall(endpoint, { method: \"PUT\", data }, requireAuth),\r\n  \r\n  delete: (endpoint, requireAuth = false) => \r\n    apiCall(endpoint, { method: \"DELETE\" }, requireAuth),\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}